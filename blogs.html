<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- //fonr awesome icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
        integrity="sha512-9usAa10IRO0HhonpyAIVpjrylPvoDwiPUiKdWk5t3PyolY1cOd4DSE0Ga+ri4AuTroPR5aQvXU9xC6qOPnzFeg=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />

    <!-- typed.js  -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/typed.js/2.0.11/typed.min.js"></script>

    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="media.css">

    <link rel="shortcut icon" href="./images/icons8-portfolio-48.png" type="image/x-icon">
    <link rel="stylesheet" type="text/css" href="loading-bar.css" />
    <script type="text/javascript" src="loading-bar.js"></script>

    <!-- <script src="https://code.jquery.com/jquery-3.5.1.js"></script> -->



    <title>[Google Analytics Expert]</title>
</head>

<body>
    <section class="navbar" id="home">
        <nav>
            <div class="nav-left">
                <h1 class="logo">Jay Isamaliya</h1>
                <ul>
                    <li><a href="./index.html">Home</a></li>
                    <li><a href="#about">About Me</a></li>
                    <li><a href="#skills">Services</a></li>
                    <li><a href="#projects">Certificates</a></li>
                    <li><a href="#featured-blogs">Featured Blogs</a></li>
                    <li><a href="#contact">Contact Me</a></li>
                </ul>

            </div>
            <div class="nav-right">
                <!-- <a href="#" id="time"></a> -->
                <a href="https://www.upwork.com/freelancers/jayi7" target="_blank" class="nav_hire_me">HIRE
                    ME</a>
                <i class="fa-solid fa-bars"></i>
            </div>
        </nav>
        <div class="main">
            <!-- <h1>Hello, <br> i'm jay isamaliya <br>Web Analytics Expert</h1> -->
        </div>
        <a href="#home" id="home-arrow"><i class="fa-solid fa-circle-arrow-up"></i></a>
    </section>
    
    <section class="blog-container">
        

	Hey there,
    Welcome to my another blog, this time we are going to talk about server side tagging with GTM using google cloud as server option.  
    
    In this gen-z era, every one on the internet are worrying about their privacy and using adblocker and browser that provides in-built ad blocker functionality like brave and new update of IOS also provide cookieless browser experience with safari. so all brands and businesses are not getting proper accuracy data so,  If you are still using third party cookies to track users on website and wants to upgrade setup to first party cookie that works fine with adblocker then my friend you are at right place.
    
    So, take a sip of coffee, and and let's get started.
    
    Here are steps what we are going to talk about:
    
    - What is server side tracking
    - How server side tracking works
    - Ways of implementing server side tracking in GTM
    - Implement server side tracking using Web Container
    - Implementing server side tracking using HTTP requests.
    
    
    What is server side tracking?
        
    - If you are still wondering what server side tracking is, let's start with another question what is tracking?
      Tracking is something similar to collecting data on website, if you have online brand, or shop or any business that needs regular updates or wants to know about users, you will have to implement tracking on your site. This will include data of user behavior on website, where users are coming from, if users are doing conversions.
    In current scenario, This all tracking depends on third party cookies, that are placed on domain level of website. 
    Another question
    what are third party?
    when a user open chrome and lend on your website, then whatever you are sending from webserver is all first party data (HTML, CSS, JS code files, images, etc..), but anything that is not in your web server and still connected to your website like, any feedback tools, tracking software, advertise on website or marketing platform uses their own servers to place data or track data on your website, that all are third party, and cookie that they use to collect information are called third-party cookies.
    
    Chrome browser allow website to store third party cookies and do advertisement. but what adblocker  do is, they will not let website store third party cookies, that's all. (same goes with IOS 16 updates, browser like brave).
    
    BUT, what if we have solution to represent third party cookie as first party cookie, then our problems are solved None of the above mentioned adblockers can be able to stop us from getting user data. that's where server side tracking of GTM comes in play.
    
    Now, many of you have question, why google is not giving in-built adblocker functionality like brave or safari (new update)?
    That's because Google's most of revenue comes from advertising and if they makes chrome cookieless browser, then all the brands and business have no option but to use other companies products that provide solution for cookie less browsers, and google doesn't want that, google wants all the people to use their product for server side nd cookie less tracking experience, and this products are still in beta mode. That is why google is not making chrome cookie less.
    
        You didn't understand? Don't worry!
        Let me explain..
        If google will go cookie less, they don't have platform for marketers, or easy way for marketers to use server side tracking, they are still developing or in beta mode. And server side tracking require more knowledge and work done than current workflow. It require coding experience and backend resources to implement APIs. you and me both knows very well that there are only few marketers available that knows coding and backend very well.
    
    And google marketing platform, display advertizing and all works on third-party cookies. so, if they wants to make chrome cookieless, first they have to make way to implement all this software available for cookieless browsing.
    
        Well, let't talk about what's not in beta mode anymore.. GTM with server side configuration.
    
    The usual way how GTM works;
    
    To understand how server side GTM works, we will have to understand how usual GTM works.if you wants to connect GTM to your website, you have to deploy javascript snippet of GTM to your website source code.
    whenever web page loads, GTM also loads along with all website code. and fires events as per configuration. GTM collect data through JS code and sends it to diff. 3rd party platforms (google analytics, gogle ads, facebook ads, etc..).
    So, whenever page loads, this all platform stores their cookies to user's web browsers.
    
    
    Traditional way of GTM
    
    
    In server side tagging, you will configure web GTM as you are doing right now, but that container will not send data directly to third-party platform, instead it will send data to server GTM. and server container will send data to respective platform. So, cookies will be stored on the server that is used to deploy server side container (we are using google cloud) and not on user's browser, so even if user is using adblocker, we can pass data from GTM to google analytics, google ads or Facebook, etc..
    
    
    
    Server side GTM configuration
                                        
    Benefits of server side GTM setup:
    
    - Reduced load on page
        as in client side tracking, we are impementing all JS code, snippets to website and all 3rd party vendors are conneted to website code, it affect website loading speed. in server side tracking, it is a benefits code will be reduced.
    
    - control what data to sent to vendors
        In client side tracking, data is directly sent from tag manager to vendors, we can not control what to capture and what to not.
    in server side tagging, data is connected from tag manager to vendors through server. so we can have control of data, we can send optional data too.
    
    - Reduce impact of adblocker
        as I have mentioned above adblocker blocks data that are passing from 3rd party to vendors, as it will not let beowser store 3rd party cookies.
    but in server side we are storing all the cookies on our server instead of user's browser, so adblocker will not be able to block that cookies.
    
    - Extend the cookie expiration time in safari
        In IOS, safari browser lets you store cookies only for 7 days, this affect for 1st party cookies too.
    so, even if i am using pure javascript to insert cookie on safari browser, it will be expired after 7 days.
    In server side, we can extend this expiration time by whatever limit we want (e.g.  2 year).
    
    Drawbacks of server side setup: 
    
    - Paid Solution
        server side solution is perfect to collect data as first party, but it needs server to deploy GTM account. And for server, you will need wallet.
    basic plan for server starts in google cloud around 30$/month. and one server is not recommended for GTM. if you will get more data, than your data will be lost. so google recommended to have atleast 4 server for your data safety. that is 120$/month.
    And this also vary based on your data. more data you collect, more amount you pay.
    
    - Not for everyone
        serevr side tagging require more technical knowledge. if you already think web GTM have lots of tehnical topica, then myfriend you will need more skills for server side tracking. you will need knowledge of programing as you will have to implement API of all marketing vendors, you will need knowledge of cloud,how website and server works.
    So, this is main challenge, as i have mentioned above many marketer does not know have technical knowledge. 
    
    To transfer to GTM server side, we will need
    
    - GTM account
    - Google Cloud account (or whatever you prefer) with billing account.
    
    
    
    And here, is how process looks like of data collection
    
    - User lends on website
    - web GTM tags, trigger gets fired.
    - server side client will take data.
    - server side tags will take data from client.
    - tags will send data to respective vendors.
    
    So, lets start making first request to google analytics using server side GTM.
    
    To make server account, open tag manager, and create new container, now set "target platform" as server to make account with server configuration.
    
    
    
    
    Now, you will be given 2 option to set up your server side account.
        Automatically provision tagging server
        Manually provision tagging server
    
    - when you click on "Automatically provision" option, google cloud will make new project for you and will setup all the thing that are needed and name of the project will be set to container id. The "default URL" from this dialogue box will be your serve URL, that we will used afterwords, so just copy this URL and save it on notepad.
    
    - If you are using google cloud as server, this option is recommended.
    
    
    "Automatically provision Tagging Server"
    
                                                       
    
    - When you click on "Manually provision" option, it will provide id, that you can add to your server.
    And you will have to make new project by your self, and add this id to your project.
    - In this option, You will get your server URL from google cloud project using some cloud shell commands.
    
    - If you are using cloud other than google's or you have already created your project, then this option is recommended.
    
    
    "Manually Provision Tagging Server"
    
    
    Now you can see server configured container is much more same as web configured container.
    In this account we have one more option added on left hand navigation bar -"Client".
    
    What is Client?
        When we get request from web container to our server, only specific client will be able to understand that request, and it will transferred that request to another HTTP request that will be sent to specific 3rd party vendors. So, for all diff. types of HTTP request, you will need to make diff. clients.
    
    There are five diff. types of client available right now, you can choose what is best for your integration.
    For now, we are going to use GA4 client, because that's where we are going to make request.
    
    
    Types of Clients
    
    
    To send request from Client to GA4, we will need to make request from Web container to our serve.
    For that, navigate to your web GTM and open GA4 configuration tag.
    
    
    GA4 Tag from web GTM
    
        
    In this,, add url that you have copied before, and paste it to "transport URL" in GA4 tag. So, all the event tags that will be fired, and using this GA4 configuration tag, will send request to server URL instead of google analytics.
    
    Now, open serve container, make new tag and set tag type to "GA4" and add measurement ID as your GA4 account measurement id.
    
    
    GA4 tag from Server Container
    
    Make new trigger for this tag, and set trigger type to "Custom" and make new condition, that "Client Name" equal to GA4 client name - "GA4". So, whenever GA4 client will get fired, this trigger and tag that is attached to this trigger will also get fired.
    
    
    
    That is how you can also set up universal analytics tag. For universal analytics, you have to add transport URL to setting variable.
    
    Now, click preview on both container And for web container give preview URL to your website domain, server container does not require any preview URL.
    
    Now go to preview window of web GTM and you can see that pageview tag is getting fire for GA4. This tag is sending HTTP request to server URL that we have given instead of the original analytics container.
    
    
    GA4 Tag firing on web container preview mode
    
    
    Open, server container preview mode, and you should be able to see GA4 tag firing.
    
    
    GA4 tag firing from server preview mode
    
    
    Now, go to google analytics account, and open debug view from admin section of GA4 property.
    and you should be able to see pageview event. that we made few seconds ago.
    
    Debug View GA4
    
    Congratulation ! You have successfully made your first request to google analytics using server GTM.
    That is how, you can also passes all event data from web GTM to server GTM and google analytics.
    And also fire marketing pixels data (Facebook, snapchat, etc..). 
    
    But wait a minute, 
    This data are still 3rd party data, because you are sending data from web container to google's server, because you have used google's URL (transport URL in GA4 tag) to pass data. if you want to add your server instead of google's  you can publish your cloud server on live website, or subdomain of website that you are using. 
    e.g. if your website is example.com, then you can make new sub-domain like analytics.example.com.
    
    you will have to do this process, in cloud shell and make some changes to website DNS to add subdomain on website.
    
    And, now you have to change transport URL from GA4 tag and make it to your current URL whatever you choose e.g. analytics.example.com.
    
    
    
    Now, you are sending data using first party, because it is your server that you are using to pass data instead of others.
    
    Conclusion:
        server side tracking include great benefits like reduced time of page load, more safe and secure and accuracy data. however, there are still few concerns like cost and technicality.
    
    As of now, google is still working on updates of GTM, I hope we will surely get new tags and client.
    
    Thank you.
    
    
    </section>


    <section class="footer" id="footer">
        <ul>
            <li><a href="#"><i class="fa-brands fa-instagram"></i></a></li>
            <li><a href="#"><i class="fa-brands fa-twitter"></i></a></li>
            <li><a href="#"><i class="fa-brands fa-linkedin"></i></a></li>
        </ul>
        <p>copyright <i class="fa-solid fa-copyright"></i> Reserved | Made by jay isamaliya</p>
    </section>

    <script src="./main.js"></script>
</body>

</html>